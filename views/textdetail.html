<div action-location="TextDetail">
  <!-- Back button : behaviour will vary according to context -->
  <div>
    <ul class="pager bmwQuestionButton" style="margin-top: 5px;  margin-bottom: 10px;">
      <li ng-class='{selectionne: false}'>

        <!-- User was allready in our app : just go back to previous page  -->
        <!--<a ng-show = "app.appUrlSvc.getTextDetailWasCalledFromTextList() || app.appUrlSvc.getTextDetailWasCalledFromDashboard()" ng-href="" historyback-->
           <!--class="pull-left" role="button" targetId="Back">-->
          <!--<img ng-src="./assets/arrow-left.png" class="stylepicto">-->
        <!--</a>-->

        <!-- Move explicitely to  text list url -->
        <!--<a ng-show = "app.appUrlSvc.isDashboardPath() == false"-->
        <!--<a ng-show = "app.appUrlSvc.getTextDetailWasCalledFromTextList() == true && app.appUrlSvc.isDashboardPath() == false"-->
        <a ng-show = "app.appUrlSvc.getTextDetailWasCalledFromTextList() == true || app.appUrlSvc.getTextDetailWasCalledFromWhatToDo() == true"
            ng-href="{{app.appUrlSvc.getFullPath('')}}/area/{{ currentAreaName }}/recipient/{{ recipientId }}/intention/{{theIntentionSlugOrId}}/text"
           class="pull-left" role="button" targetId="Back">
          <img ng-src="./assets/arrow-left.png" class="stylepicto">
        </a>
        <a ng-show = "app.appUrlSvc.getTextDetailWasCalledFromTextList() == false && app.appUrlSvc.getTextDetailWasCalledFromWhatToDo() == false"
           ng-href="{{app.appUrlSvc.getFullPath('')}}"
           class="pull-left" role="button" targetId="Back">
          <img ng-src="./assets/arrow-left.png" class="stylepicto">
        </a>

        <!-- Move explicitely to dashboard -->
        <!--<a ng-show = "app.appUrlSvc.getTextDetailWasCalledFromDashboard() == false && app.appUrlSvc.isDashboardPath() == true"-->
           <!--ng-href="{{app.appUrlSvc.getFullPath('')}}/area/{{ currentAreaName }}/dashboard"-->
           <!--class="pull-left" role="button" targetId="Back">-->
          <!--<img ng-src="./assets/arrow-left.png" class="stylepicto">-->
        <!--</a>-->

        <!-- Page title -->
        <h4 class="pull-left" style="margin-left: 10px; font-size: 120%;" translate>{{ theIntentionLabel }}</h4>

        <!-- Button to switch image -->
        <!--<a>-->
          <button ng-if="false" ng-click="changeImage()" class="btn btn-default btn-lg pull-right glyphicon glyphicon-refresh" targetType="Photo"  actionType="refresh"  targetId="{{imageUrl}}" ></button>
        <!--</a>-->

      </li>
    </ul>
  </div>

  <!--<div class="hidden-xs"  style="text-align: center">-->
    <!--<img style=" margin-top:10px; margin-bottom: 10px;" width="500px;" ng-src="{{imageUrl}}"  usemap="#largeMap">-->
    <!--<map name = "largeMap">-->
      <!--<area shape="rect" coords="0,0,200,600" ng-click="changeImage()" />-->
      <!--<area shape="rect" coords="300,0,500,600" ng-click="changeImage()" />-->
    <!--</map>-->
  <!--</div>-->
  <!--<br>-->
  <!--<div class="visible-xs"  style="text-align: center">-->
    <!--<img style="margin-top:0px; margin-bottom: 10px;" width="330px;" ng-src="{{imageUrl}}" usemap="#smallMap">-->
    <!--<map name = "smallMap">-->
      <!--<area shape="rect" coords="0,0,100,600" ng-click="changeImage()" />-->
      <!--<area shape="rect" coords="230,0,330,600" ng-click="changeImage()" />-->
    <!--</map>-->
  <!--</div>-->

<!-- IMAGE : large and small version -->
  <!--col-xs-1 is better for marging but does not work for very narrow screens -->
  <div ng-if="screenWidth() > 350" class="row text-center" style="vertical-align: middle; margin-top: 30px;">
    <div class="col-xs-1 col-sm-2 col-md-3 col-lg-3" style="text-align: right; vertical-align: middle;"  ">
      <button ng-disabled="noPreviousImage()" ng-click="previousImage()" style="margin-top: 30px; margin-right: -50px; z-index: 100;" class="btn btn-default btn-lg glyphicon glyphicon-chevron-left" targetType="Photo"  actionType="back"  targetId="{{getImageFileName()}}"></button>
    </div>
    <div class="col-xs-10 col-sm-8 col-md-6 col-lg-6" style="text-align: center;">
      <div  style="text-align: center; vertical-align: middle; ">
        <img style="text-align: center;" class="img-responsive center-block" style=""  ng-src="{{imageUrl}}"  usemap="#largeMap">
        <!--<map name = "largeMap">-->
          <!--<area shape="rect" coords="0,0,200,600" ng-click="changeImage()" />-->
          <!--<area shape="rect" coords="300,0,500,600" ng-click="changeImage()" />-->
        <!--</map>-->
      </div>
    </div>
    <div class="col-xs-1 col-sm-2 col-md-3 col-lg-3" style="text-align: left;"  ng-click="changeImage()">
      <button style="margin-top: 30px; margin-left: -50px; margin-right: 0px; z-index: 100;" class="btn btn-default btn-lg glyphicon glyphicon-chevron-right" targetType="Photo"  actionType="next"  targetId="{{getImageFileName()}}"></button>
    </div>
  </div>


  <div ng-if="screenWidth() <= 350" class="row text-center" style="vertical-align: middle; margin-top: 30px;">
    <!--col-xs-1 would be better but does not work for very narrow screens -->
    <div class="col-xs-2 col-sm-2 col-md-3 col-lg-3" style="text-align: right; vertical-align: middle;" >
      <button ng-disabled="noPreviousImage()" ng-click="previousImage()" style="margin-top: 30px; margin-right: -50px; z-index: 100;" class="btn btn-default btn-lg glyphicon glyphicon-chevron-left" targetType="Photo"  actionType="back"  targetId="{{getImageFileName()}}"></button>
    </div>
    <div class="col-xs-8 col-sm-8 col-md-6 col-lg-6" style="text-align: center;">
      <div  style="text-align: center; vertical-align: middle; ">
        <img style="text-align: center;" class="img-responsive center-block" style=""  ng-src="{{imageUrl}}"  usemap="#largeMap">
        <!--<map name = "largeMap">-->
          <!--<area shape="rect" coords="0,0,200,600" ng-click="changeImage()" />-->
          <!--<area shape="rect" coords="300,0,500,600" ng-click="changeImage()" />-->
        <!--</map>-->
      </div>
    </div>
    <div class="col-xs-2 col-sm-2 col-md-3 col-lg-3" style="text-align: left;"  ng-click="changeImage()">
      <button style="margin-top: 30px; margin-left: -50px; margin-right: 0px; z-index: 100;" class="btn btn-default btn-lg glyphicon glyphicon-chevron-right" targetType="Photo"  actionType="next"  targetId="{{getImageFileName()}}"></button>
    </div>
  </div>


<!-- TEXT : large and small version -->
  <div ng-if="screenWidth() > 350" class="row" style="vertical-align: middle; margin-top: 35px;"  >
    <div class="col-xs-1 col-sm-2 col-md-3 col-lg-3" style="text-align: right; vertical-align: middle;"  ng-click="previousText()">
      <button ng-disabled="noPreviousText()" style="margin-top: 5px; margin-right: -50px; z-index: 100;" class="btn btn-default btn-lg glyphicon glyphicon-chevron-left" targetType="Text"  actionType="back"  targetId="{{currentText.TextId}}"></button>
    </div>
    <div class="col-xs-10 col-sm-8 col-md-6 col-lg-6" style="text-align: center;">
      <div style=" margin-left: 15%; margin-right:15%; font-size: 110%; text-align: center;"    >
        <span ng-bind-html="txt.Content" style="white-space: pre-wrap;  font-family: 'Open Sans', Arial, Helvetica, sans-serif; "></span>
      </div>
    </div>
    <div class="col-xs-1 col-sm-2 col-md-3 col-lg-3" style="text-align: left;"  ng-click="changeText()">
      <button style="margin-top: 5px; margin-left: -50px; z-index: 100;" class="btn  btn-default btn-lg glyphicon glyphicon-chevron-right" targetType="Text"  actionType="next"  targetId="{{currentText.TextId}}"></button>
    </div>
  </div>


  <div ng-if="screenWidth() <= 350" class="row" style="vertical-align: middle; margin-top: 35px;"  >
    <div class="col-xs-2 col-sm-2 col-md-3 col-lg-3" style="text-align: right; vertical-align: middle;"  ng-click="previousText()">
      <button ng-disabled="noPreviousText()" style="margin-top: 5px; margin-right: -50px; z-index: 100;" class="btn btn-default btn-lg glyphicon glyphicon-chevron-left" targetType="Text"  actionType="back"  targetId="{{currentText.TextId}}"></button>
    </div>
    <div class="col-xs-8 col-sm-8 col-md-6 col-lg-6" style="text-align: center;">
      <div style=" margin-left: 15%; margin-right:15%; font-size: 110%; text-align: center;"    >
        <span ng-bind-html="txt.Content" style="white-space: pre-wrap;  font-family: 'Open Sans', Arial, Helvetica, sans-serif; "></span>
      </div>
    </div>
    <div class="col-xs-2 col-sm-2 col-md-3 col-lg-3" style="text-align: left;"  ng-click="changeText()">
      <button style="margin-top: 5px; margin-left: -50px; z-index: 100;" class="btn  btn-default btn-lg glyphicon glyphicon-chevron-right" targetType="Text"  actionType="next"  targetId="{{currentText.TextId}}"></button>
    </div>
  </div>

  <!-- Text -->
  <!--<div ng-hide="editText" style="text-align: center; font-family: 'Open Sans', Arial, Helvetica, sans-serif;">-->
    <!--<div class="hidden-xs" style="margin-top: 0px; margin-left: 20%; margin-right: 20%; font-size: 16px;"    >-->
      <!--<span ng-bind-html="txt.Content" style="white-space: pre-wrap; "></span>-->
    <!--</div>-->
    <!--<div class="visible-xs" style="margin-left: 15%; margin-right: 15%; margin-top: 5px; font-size: 14px; font-family: 'Open Sans', Arial, Helvetica, sans-serif; "  >-->
      <!--<span ng-bind-html="txt.Content" style="white-space: pre-wrap; "></span>-->
    <!--</div>-->
  <!--</div>-->

  <!-- Text edition -->
  <div ng-show="editText">
    <textarea
        ng-model="txt.Content"
        id="currentText"
        style="width:100%;" rows="8">
    </textarea>
  </div>
  <!-- Text author -->
  <div ng-show="isQuote(currentText) && authorButton!='disabled'" style="margin-top: 10px; text-align: center;" >
    <span class ="auteur">{{currentText.Author}}</span>
    <!--&nbsp-->
    <!--<button class="btn btn-xs btn-default " ng-class = '{disabled: authorButton=="disabled"}'-->
            <!--targetId="{{ currentText.TextId }}" targetType="Text" actionType="edit"-->
            <!--ng-click="addAuthor()">+</button>-->
  </div>

  <!-- ACTIONS -->
  <div class="row" style="vertical-align: middle; margin-top: 30px;"  >
    <div class="col-xs-1 col-sm-2 col-md-3 col-lg-3"></div>
    <div class="col-xs-10 col-sm-8 col-md-6 col-lg-6" style="text-align: center; vertical-align: middle;">
      <div class="" >
        <!-- fb Send -->
        <button ng-if="!app.appUrlSvc.isMobile.any()" ng-click="fbSend()" actionType="FbSend" targetType="Text" targetId="{{currentText.TextId}}" ng-show="true" type="button" class="btn btn-default  glyphicon glyphicon-flash" ng-click="fbShare"></button>
        <!--<button ng-if="true" ng-click="fbSend()" ng-show="true" type="button" class="btn btn-default btn-lg glyphicon glyphicon-flash" ng-click="fbShare"></button>-->
        <!-- fb Share -->
        <!--<button style="margin-left: 10px" ng-if="theIntentionSlugOrId != 'fake'" ng-click="fbShare()" ng-show="true" type="button" class="btn btn-primary btn-lg glyphicon glyphicon-share" ng-click="fbShare"></button>-->
        <button style="margin-left: 15px; margin-right: 15px;" ng-if="theIntentionSlugOrId != 'fake'" ng-click="fbShare()" actionType="FbShare" targetType="Text" targetId="{{currentText.TextId}}" type="button" class="btn btn-primary " translate>Partager</button>
      <!-- Send -->
        <a style=""  targetType="Text"
           targetId="{{currentText.TextId}}"
           actionType="SendMail"
           ng-href="{{mailToThis}}"
           class="btn btn-default   glyphicon glyphicon-send">
        </a>
      </div>
    </div>
    <div class="col-xs-1 col-sm-2 col-md-3 col-lg-3"></div>
  </div>

  <!-- Translations and HOMEPAGE  -->
  <!--<div ng-show = "!app.appUrlSvc.getTextDetailWasCalledFromTextList() && !app.appUrlSvc.getTextDetailWasCalledFromDashboard()" style="margin-top: 20px; margin-bottom: 15px; text-align: center; ">-->
  <div style="margin-top: 15px; margin-bottom: 30px; text-align: center; ">
    <a ng-show = "userEmailIsEmpty()" style="" class="btn btn-default  glyphicon glyphicon-off" id="discoverTheApp" ng-href="{{app.appUrlSvc.getFullPath('favoriteRecipients')}}" targetId="Welcome"></a>
    <button style="margin-left: 15px; margin-right: 15px" ng-disabled="!HasTranslations" ng-click="setShowTranslations(!getShowTranslations())" class="btn btn-default" type="button" actionType="ShowTranslations" targetType="Text" targetId="{{currentText.TextId}}"  translate>Traduire</button>
    <a style=""  type="button"  ng-href="{{app.appUrlSvc.getFullPath('')}}" class="btn btn-default  glyphicon glyphicon-home"></a>
    <!--<a style="margin-left: 10px"  type="button" ng-href="http://localhost:3000/fr" class="btn btn-default btn-lg glyphicon glyphicon-home"></a>-->
    <!--<a style="margin-left: 10px" class="btn btn-default" id="discoverTheApp" ng-href="{{app.appUrlSvc.getFullPath('')+'favoriteRecipients'}}" targetId="Welcome" translate>Retenez-les</a>-->
  </div>

  <!-- Translations  -->
  <div ng-if="getShowTranslations()">
    <div ng-include="'views/partials/alternativeTexts.html'"> </div>
  </div>

  <!-- When user has landed directly on this page, suggest a visit to intention list  -->
  <!--<div ng-show = "!app.appUrlSvc.getTextDetailWasCalledFromTextList() && !app.appUrlSvc.getTextDetailWasCalledFromDashboard()" style="margin-top: 15px; margin-bottom: 15px; text-align: center; ">-->
    <!--<div style="margin-bottom: 10px;">-->
      <!--<span translate >Voir les meilleures façons de dire</span>-->
      <!--<a style="color: #428bca; text-decoration: underline" id="toTextList"-->
         <!--ng-href="{{app.appUrlSvc.getFullPath('')}}/area/{{ currentAreaName }}/recipient/{{ recipientId }}/intention/{{theIntentionSlugOrId}}/text"-->
         <!--targetId="TextList" translate>{{ theIntentionLabel }}-->
      <!--</a>-->
    <!--</div>-->
  <!--</div>-->


  <div ng-include="'views/partials/appLinksInsert.html'" style="margin-top: 20px; text-align: center" ></div>
  <!-- Switch language : we can show it some of the time or all of the time -->
  <!--<div ng-show = "!app.appUrlSvc.getTextDetailWasCalledFromTextList() && !app.appUrlSvc.getTextDetailWasCalledFromDashboard()" ng-include="'views/partials/languageBar.html'" style="margin-top: 20px; text-align: center" ></div>-->
  <div ng-include="'views/partials/languageBar.html'" style="margin-top: 20px; text-align: center" ></div>

  <!-- Mozart  -->
  <!--<div ng-if = "!app.appUrlSvc.getTextDetailWasCalledFromTextList() && !app.appUrlSvc.getTextDetailWasCalledFromDashboard()" style="margin-top:25px; margin-bottom: 15px; text-align: center;">-->
    <!--<img height="120px;" src="./assets/pianoCat.jpg">-->
  <!--</div>-->


</div>

<!-- edit  -->
<!--<button style="margin-left: 10px" class="btn btn-default  glyphicon glyphicon-pencil" translate-->
<!--targetId="{{ currentText.TextId }}" targetType="Text" actionType="edit"-->
<!--ng-click="edit()" ng-hide="editText"></button>-->


<!-- send  -->
<!--<button style="margin-left: 10px" class="btn btn-default" translate-->
<!--targetId="{{ currentText.TextId }}" targetType="Text" actionType="send"-->
<!--ng-click="send()">Envoyer</button>-->

<!-- fb share  -->
<!--<div ng-if="includeSocialPluginsOnTextPages()" class="pull-right" style="margin-bottom: 5px; margin-top: 5px; margin-right: 5px;" >-->
<!--<div class="fb-share-button btn btn-default"></div>-->
<!--</div>-->
<!--<div></div>-->


<!-- fb send : use api version when possible, button shows right away and content of fb plugin looks less random, will not work on mobiles -->
<!-- ......but it does not seem to work if the page has never been scrapped by fb before  -->
<!--<button ng-click="fbSend()" class="btn hidden-xs" style="background: url(/assets/fbSend.png)  no-repeat; width: 70px; height: 25px;"></button>-->
<!-- use the fb social button on mobiles : can take a few seconds to render, and will scrape what it can  -->
<!-- Disabled because often does not show the right text or the right photo  -->
<!--<div class="fb-send btn btn-default"></div>-->
