<div action-location="TextDetail">

  <div>
    <!--<h3   ng-bind-html = "currentText.Abstract || currentIntention.Label" ></h3>-->
    <ul class="pager bmwQuestionButton" style="margin-top: 5px;  margin-bottom: 25px;">
      <li ng-class='{selectionne: false}'>

        <!-- User was allready in our app : just go back to previous page  -->
        <a ng-show = "appUrlSvc.getTextDetailWasCalledFromTextList() || appUrlSvc.getTextDetailWasCalledFromDashboard()" ng-href="" historyback
           class="pull-left" role="button" targetId="Back">
          <img ng-src="./assets/arrow-left.png" class="stylepicto">
        </a>

        <!-- Move explicitely to intention text list -->
        <a ng-show = "appUrlSvc.getTextDetailWasCalledFromTextList() == false && appUrlSvc.isDashboardPath() == false"
           ng-href="{{app.appUrlSvc.getFullPath('')}}area/{{ currentAreaName }}/recipient/{{ recipientId }}/intention/{{app.appUrlSvc.getIntentionSlug(currentIntention)}}/text"
           class="pull-left" role="button" targetId="Back">
          <img ng-src="./assets/arrow-left.png" class="stylepicto">
        </a>

        <!-- Move explicitely to dashboard -->
        <a ng-show = "appUrlSvc.getTextDetailWasCalledFromDashboard() == false && appUrlSvc.isDashboardPath() == true"
           ng-href="{{app.appUrlSvc.getFullPath('')}}area/{{ currentAreaName }}/dashboard"
           class="pull-left" role="button" targetId="Back">
          <img ng-src="./assets/arrow-left.png" class="stylepicto">
        </a>

        <h4 class="pull-left" style="margin-left: 10px;" translate>{{ currentIntention.Label }}</h4>
        <img style="margin-top:0px; margin-right: 10px;" width="50px" height="40px" src="./assets/TouchWordingCompressed.jpg" class="pull-right">

      </li>
    </ul>
  </div>

<div ng-if="includeSocialPluginsOnTextPages()" class="pull-right" style="margin-bottom: 5px; margin-top: 5px; margin-right: 5px;" >
  <!-- fb share  -->
  <div class="fb-share-button btn btn-default"></div>
</div>
  <div></div>

  <div class="well well-lg" ng-hide="editText" style="border-color: #428bca; margin-bottom: 5px; background-color: #FFFFFF;" >
    <span ng-bind-html="txt.Content" style="white-space: pre-wrap"></span>
    <!--<span cvd-text="currentText"></span>-->
    <!-- favourite star appears at random places  -->
    <!--<favourite-toggle is-favourite="isFavourite()" on-change="setFavourite()"></favourite-toggle>-->
  </div>
  <div ng-show="editText">
    <textarea
        ng-model="txt.Content"
        id="currentText"
        style="width:100%;" rows="10">
    </textarea>
  </div>


  <div class="pull-left">
  <!--<div>-->
    <!-- fb send : use api version when possible, button shows right away and content of fb plugin looks less random, will not work on mobiles -->
    <!-- ......but it does not seem to work if the page has never been scrapped by fb before  -->
    <!--<button ng-click="fbSend()" class="btn hidden-xs" style="background: url(/assets/fbSend.png)  no-repeat; width: 70px; height: 25px;"></button>-->
    <!-- use the fb social button on mobiles : can take a few seconds to render, and will scrape what it can  -->
    <div class="fb-send btn btn-default visible-xs"></div>

    <!--<div ng-show="isQuote(currentText)" style="margin-bottom: 5px;" >-->
      <!--<span class ="auteur hidden-xs " translate>Auteur</span>-->
      <!--<span class ="auteur hidden-xs" translate> : </span>-->

      <!--<span class ="auteur">{{currentText.Author}}</span>-->
      <!--&nbsp-->
      <!--<button class="btn btn-xs btn-default " ng-class = '{disabled: authorButton=="disabled"}'-->
              <!--targetId="{{ Id }}" targetType="Text" actionType="edit"-->
              <!--ng-click="addAuthor()">+</button>-->
    <!--</div>-->
  </div>



  <div class="pull-right" style="vertical-align: middle; ">

    <!-- edit  -->
    <button style="margin-left: 10px" class="btn btn-default  glyphicon glyphicon-pencil" translate
            targetId="{{ Id }}" targetType="Text" actionType="edit"
            ng-click="edit()" ng-hide="editText"></button>
    <!-- send  -->
    <!--<button style="margin-left: 10px" class="btn btn-default glyphicon glyphicon-envelope" translate-->
            <!--targetId="{{ Id }}" targetType="Text" actionType="send"-->
            <!--ng-click="send()"></button>-->
    <button style="margin-left: 10px" class="btn btn-default" translate
            targetId="{{ Id }}" targetType="Text" actionType="send"
            ng-click="send()">Envoyer</button>
  </div>

  <br/>
  <br/>

  <div ng-show="isQuote(currentText)" style="margin-bottom: 5px;" >
    <span class ="auteur hidden-xs " translate>Auteur</span>
    <span class ="auteur hidden-xs" translate> : </span>

    <span class ="auteur">{{currentText.Author}}</span>
    &nbsp
    <button class="btn btn-xs btn-default " ng-class = '{disabled: authorButton=="disabled"}'
            targetId="{{ Id }}" targetType="Text" actionType="edit"
            ng-click="addAuthor()">+</button>
  </div>



    <div ng-show="currentText.ReferenceUrl">
        Source : <a ng-href = "{{currentText.ReferenceUrl}}" >{{currentText.ReferenceUrl}}</a>
    </div>

  <div style="margin-bottom:30px;"></div>

  <div></div>

  <div ng-show = "!appUrlSvc.getTextDetailWasCalledFromTextList() && !appUrlSvc.getTextDetailWasCalledFromDashboard()" style="margin-top: 0px; margin-bottom: 15px; text-align: center; ">
    <div translate style="margin-bottom: 10px;">Testez le prompteur</div>
    <!--style="color:  #428bca"-->
    <a style="color:  #428bca" class="btn btn-default btn-lg" id="toDashboard" ng-href="{{app.appUrlSvc.getFullPath('')}}area/General/dashboard" targetId="Dashboard" translate>Retenez-les</a>
  </div>


  <!--<div ng-repeat="languageTextGroup in  languageTextGroups" style="padding-top: 20px;">-->
    <!--<h5 style="font-size: 120%; margin-top: 0px;" translate>{{ languageTextGroup.code }}</h5>-->

    <!--<div ng-repeat="text in languageTextGroup.texts">-->
      <!--<div class="well well-lg" style="border-color: #428bca; margin-bottom: 5px; margin-top: 25px;">-->
        <!--<span ng-bind-html="text.Content"></span>-->
        <!--&lt;!&ndash;<div cvd-text="text"></div>&ndash;&gt;-->
        <!--&lt;!&ndash;<favourite-toggle is-favourite="isFavourite()" on-change="setFavourite()"></favourite-toggle>&ndash;&gt;-->
      <!--</div>-->
      <!--<div>-->
        <!--<span ng-show="isVariationFormMorePrecise(text)" style="color: #428bca;">-->
          <!--<span translate>Ecrit</span> <span translate>{{getSenderGender(text)}}</span> <span translate>{{getRecipientGender(text)}}</span> <span translate>{{getTV(text)}}</span>-->
        <!--</span>-->

        <!--<a rel="nofollow" ng-href="{{app.appUrlSvc.getRootPath('')}}area/{{ currentAreaName }}/recipient/{{ recipientId }}/intention/{{ app.appUrlSvc.getIntentionSlug(currentIntention) }}/text/{{text.TextId}}"-->
           <!--targetType="Text"  actionType="open"  targetId="{{txt.TextId}}">-->
          <!--<button class="btn btn-default pull-right glyphicon glyphicon-ok" translate-->
                  <!--targetId="{{ Id }}" targetType="Text"></button>-->
         <!--</a>-->
      <!--</div>-->
      <!--<div>&nbsp</div>-->
    <!--</div>-->
  <!--</div>-->

  <br>
  <accordion ng-show="languageTextGroups.length > 0">
    <accordion-group is-open="theAccordionStatus.open" is-disabled="false">
      <accordion-heading>
        <i class="glyphicon" ng-class="{'glyphicon-plus': !theAccordionStatus.open, 'glyphicon-minus': theAccordionStatus.open}"></i>
        <span translate class="brand">Traductions</span>
        (
        <span class="brand">{{languageTextGroups.length}}</span>
        )
      </accordion-heading>
      <!-- Translations  -->
      <div ng-repeat="languageTextGroup in  languageTextGroups" style="padding-top: 10px; padding-bottom: 20px;">
        <h5 style="font-size: 120%; margin-top: 0px;" translate>{{ languageTextGroup.code }}</h5>

        <div ng-repeat="text in languageTextGroup.texts">
          <div class="well well-lg" style="border-color: #428bca; margin-bottom: 5px; margin-top: 25px;">
            <span ng-bind-html="text.Content"></span>
            <!--<div cvd-text="text"></div>-->
            <!--<favourite-toggle is-favourite="isFavourite()" on-change="setFavourite()"></favourite-toggle>-->
          </div>
          <div>
        <span ng-show="isVariationFormMorePrecise(text)" style="color: #428bca;">
          <span translate>Ecrit</span> <span translate>{{getSenderGender(text)}}</span> <span translate>{{getRecipientGender(text)}}</span> <span translate>{{getTV(text)}}</span>
        </span>

            <a rel="nofollow" ng-href="{{app.appUrlSvc.getRootPath('')}}area/{{ currentAreaName }}/recipient/{{ recipientId }}/intention/{{ app.appUrlSvc.getIntentionSlug(currentIntention) }}/text/{{text.TextId}}"
               targetType="Text"  actionType="open"  targetId="{{txt.TextId}}">
              <button class="btn btn-default pull-right glyphicon glyphicon-ok" translate
                      targetId="{{ Id }}" targetType="Text"></button>
            </a>
          </div>
          <div>&nbsp</div>
        </div>
      </div>
    </accordion-group>
  </accordion>


</div>